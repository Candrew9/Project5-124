/**
 * 
 */
package prj5;

import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.Scanner;

/**
 * @author Brooke Fey
 * @version 2018.11.11
 */
public class Input {

    private static Scanner scanSurvey;
    private static Scanner scanSong;
    // private static DLList<String[]> survey;
    private static String[][] surveyData;
    private static String[][] songList;


    /**
     * @param args
     */
    public static void main(String[] args) {
        FileReader fileSurvey = null;
        FileReader fileSongList = null;
        BufferedReader bufferSurvey = null;
        BufferedReader bufferSongList = null;
        String result = "";
        // survey = new DLList<String[]>();
        // songList = new ArrayList<String[]>();
        List<String[]> surveyRows = new ArrayList<String[]>();
        List<String[]> songRows = new ArrayList<String[]>();
        try {
            // Sets up scanners
            fileSurvey = new FileReader(args[0]);
            fileSongList = new FileReader(args[1]);
            bufferSurvey = new BufferedReader(fileSurvey);
            bufferSongList = new BufferedReader(fileSongList);
            scanSurvey = new Scanner(bufferSurvey);
            scanSong = new Scanner(bufferSongList);
            // Puts csv lines in a column
            while (scanSurvey.hasNextLine()) {
                String line = scanSurvey.nextLine();
                String[] separator = line.split(",");
                // survey.add(separator);
                surveyRows.add(separator);
                // System.out.println(separator);
                // System.out.println(Arrays.toString(separator));
            }
            while (scanSong.hasNextLine()) {
                String[] songs = scanSong.nextLine().split(",");
                // songList.add(songs);
                songRows.add(songs);
            }
            surveyData = new String[surveyRows.size()][0];
            surveyData = surveyRows.toArray(surveyData);
            songList = new String[songRows.size()][0];
            songList = songRows.toArray(songList);
        }
        catch (FileNotFoundException e) {
            e.printStackTrace();
        }
        scanSurvey.close();
        scanSong.close();
        System.out.println(outputToString());
        // System.out.println(songList[][0]);
        // System.out.println(surveyData[5][5]);
        // System.out.println(songList.length);
    }


    public static String outputToString() {
        String outputHolder = "";
        for (int i = 1; i < songList.length; i++) {
            outputHolder += songList[0][0] + " " + songList[i][0] + "\n"; // Song
                                                                          // title
            outputHolder += "song " + songList[0][1] + " " + songList[i][1]
                + "\n"; // Song Artist
            outputHolder += "song " + songList[0][3] + " " + songList[i][3]
                + "\n"; // Song year, different order between csv and
            // test
            outputHolder += "song " + songList[0][2] + " " + songList[i][2]
                + "\n"; // Song genre
            outputHolder += "heard" + "\n"; // heard header
            CombinationCalculator combo = new CombinationCalculator(surveyData,
                i, "Hobby");
            outputHolder += combo.heardPercentToString() + "\n"; // heard
                                                                 // percentages
            outputHolder += "likes" + "\n"; // likes header
            outputHolder += combo.likePercentToString() + "\n"; // likes
                                                                // percentages
            outputHolder += "\n";
        }
        return outputHolder;
    }
}
